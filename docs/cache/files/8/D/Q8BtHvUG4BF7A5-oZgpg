1651112578
AwuilbDvXz%3A5de8b9f62402ea88afb20f05e46c4726-a4846c6ea47dad4fd4abbe9adb9e464c
s:26020:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxMjp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6ImE0ODQ2YzZlYTQ3ZGFkNGZkNGFiYmU5YWRiOWU0NjRjIjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWUiO3M6MTg6InNpbXBsZS1waHB1bml0LnBocCI7czozOToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBwYXRoIjtzOjUyOiJ2ZW5kb3Ivc3ltZm9ueS9waHB1bml0LWJyaWRnZS9iaW4vc2ltcGxlLXBocHVuaXQucGhwIjtzOjQxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHNvdXJjZSI7czoxNzYwMzoiPD9waHAKCi8qCiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRoZSBTeW1mb255IHBhY2thZ2UuCiAqCiAqIChjKSBGYWJpZW4gUG90ZW5jaWVyIDxmYWJpZW5Ac3ltZm9ueS5jb20+CiAqCiAqIEZvciB0aGUgZnVsbCBjb3B5cmlnaHQgYW5kIGxpY2Vuc2UgaW5mb3JtYXRpb24sIHBsZWFzZSB2aWV3IHRoZSBMSUNFTlNFCiAqIGZpbGUgdGhhdCB3YXMgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHNvdXJjZSBjb2RlLgogKi8KCi8vIFBsZWFzZSB1cGRhdGUgd2hlbiBwaHB1bml0IG5lZWRzIHRvIGJlIHJlaW5zdGFsbGVkIHdpdGggZnJlc2ggZGVwczoKLy8gQ2FjaGUtSWQ6IDIwMjAtMDEtMzEgMTA6MDAgVVRDCgplcnJvcl9yZXBvcnRpbmcoLTEpOwoKZ2xvYmFsICRhcmd2LCAkYXJnYzsKJGFyZ3YgPSBpc3NldCgkX1NFUlZFUlsnYXJndiddKSA/ICRfU0VSVkVSWydhcmd2J10gOiBbXTsKJGFyZ2MgPSBpc3NldCgkX1NFUlZFUlsnYXJnYyddKSA/ICRfU0VSVkVSWydhcmdjJ10gOiAwOwokZ2V0RW52VmFyID0gZnVuY3Rpb24gKCRuYW1lLCAkZGVmYXVsdCA9IGZhbHNlKSB1c2UgKCRhcmd2KSB7CiAgICBpZiAoZmFsc2UgIT09ICR2YWx1ZSA9IGdldGVudigkbmFtZSkpIHsKICAgICAgICByZXR1cm4gJHZhbHVlOwogICAgfQoKICAgIHN0YXRpYyAkcGhwdW5pdENvbmZpZyA9IG51bGw7CiAgICBpZiAobnVsbCA9PT0gJHBocHVuaXRDb25maWcpIHsKICAgICAgICAkcGhwdW5pdENvbmZpZ0ZpbGVuYW1lID0gbnVsbDsKICAgICAgICAkZ2V0UGhwVW5pdENvbmZpZyA9IGZ1bmN0aW9uICgkcHJvYmFibGVDb25maWcpIHVzZSAoJiRnZXRQaHBVbml0Q29uZmlnKSB7CiAgICAgICAgICAgIGlmICghJHByb2JhYmxlQ29uZmlnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaXNfZGlyKCRwcm9iYWJsZUNvbmZpZykpIHsKICAgICAgICAgICAgICAgIHJldHVybiAkZ2V0UGhwVW5pdENvbmZpZygkcHJvYmFibGVDb25maWcuXERJUkVDVE9SWV9TRVBBUkFUT1IuJ3BocHVuaXQueG1sJyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChmaWxlX2V4aXN0cygkcHJvYmFibGVDb25maWcpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJHByb2JhYmxlQ29uZmlnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChmaWxlX2V4aXN0cygkcHJvYmFibGVDb25maWcuJy5kaXN0JykpIHsKICAgICAgICAgICAgICAgIHJldHVybiAkcHJvYmFibGVDb25maWcuJy5kaXN0JzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfTsKCiAgICAgICAgZm9yZWFjaCAoJGFyZ3YgYXMgJGNsaUFyZ3VtZW50SW5kZXggPT4gJGNsaUFyZ3VtZW50KSB7CiAgICAgICAgICAgIGlmICgnLS0nID09PSAkY2xpQXJndW1lbnQpIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIGxvbmcgb3B0aW9uCiAgICAgICAgICAgIGlmICgnLS1jb25maWd1cmF0aW9uJyA9PT0gJGNsaUFyZ3VtZW50ICYmIGFycmF5X2tleV9leGlzdHMoJGNsaUFyZ3VtZW50SW5kZXggKyAxLCAkYXJndikpIHsKICAgICAgICAgICAgICAgICRwaHB1bml0Q29uZmlnRmlsZW5hbWUgPSAkZ2V0UGhwVW5pdENvbmZpZygkYXJndlskY2xpQXJndW1lbnRJbmRleCArIDFdKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIHNob3J0IG9wdGlvbgogICAgICAgICAgICBpZiAoMCA9PT0gc3RycG9zKCRjbGlBcmd1bWVudCwgJy1jJykpIHsKICAgICAgICAgICAgICAgIGlmICgnLWMnID09PSAkY2xpQXJndW1lbnQgJiYgYXJyYXlfa2V5X2V4aXN0cygkY2xpQXJndW1lbnRJbmRleCArIDEsICRhcmd2KSkgewogICAgICAgICAgICAgICAgICAgICRwaHB1bml0Q29uZmlnRmlsZW5hbWUgPSAkZ2V0UGhwVW5pdENvbmZpZygkYXJndlskY2xpQXJndW1lbnRJbmRleCArIDFdKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJHBocHVuaXRDb25maWdGaWxlbmFtZSA9ICRnZXRQaHBVbml0Q29uZmlnKHN1YnN0cigkY2xpQXJndW1lbnQsIDIpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAkcGhwdW5pdENvbmZpZ0ZpbGVuYW1lID0gJHBocHVuaXRDb25maWdGaWxlbmFtZSA/OiAkZ2V0UGhwVW5pdENvbmZpZygncGhwdW5pdC54bWwnKTsKCiAgICAgICAgaWYgKCRwaHB1bml0Q29uZmlnRmlsZW5hbWUpIHsKICAgICAgICAgICAgJHBocHVuaXRDb25maWcgPSBuZXcgRG9tRG9jdW1lbnQoKTsKICAgICAgICAgICAgJHBocHVuaXRDb25maWctPmxvYWQoJHBocHVuaXRDb25maWdGaWxlbmFtZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJHBocHVuaXRDb25maWcgPSBmYWxzZTsKICAgICAgICB9CiAgICB9CiAgICBpZiAoZmFsc2UgIT09ICRwaHB1bml0Q29uZmlnKSB7CiAgICAgICAgJHZhciA9IG5ldyBET01YcGF0aCgkcGhwdW5pdENvbmZpZyk7CiAgICAgICAgZm9yZWFjaCAoJHZhci0+cXVlcnkoJy8vcGhwL3NlcnZlcltAbmFtZT0iJy4kbmFtZS4nIl0nKSBhcyAkdmFyKSB7CiAgICAgICAgICAgIHJldHVybiAkdmFyLT5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJyk7CiAgICAgICAgfQogICAgICAgIGZvcmVhY2ggKCR2YXItPnF1ZXJ5KCcvL3BocC9lbnZbQG5hbWU9IicuJG5hbWUuJyJdJykgYXMgJHZhcikgewogICAgICAgICAgICByZXR1cm4gJHZhci0+Z2V0QXR0cmlidXRlKCd2YWx1ZScpOwogICAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gJGRlZmF1bHQ7Cn07CgokcGFzc3RocnVPckZhaWwgPSBmdW5jdGlvbiAoJGNvbW1hbmQpIHsKICAgIHBhc3N0aHJ1KCRjb21tYW5kLCAkc3RhdHVzKTsKCiAgICBpZiAoJHN0YXR1cykgewogICAgICAgIGV4aXQoJHN0YXR1cyk7CiAgICB9Cn07CgppZiAoXFBIUF9WRVJTSU9OX0lEID49IDgwMDAwKSB7CiAgICAvLyBQSFAgOCByZXF1aXJlcyBQSFBVbml0IDkuMysKICAgICRQSFBVTklUX1ZFUlNJT04gPSAkZ2V0RW52VmFyKCdTWU1GT05ZX1BIUFVOSVRfVkVSU0lPTicsICc5LjQnKSA/OiAnOS40JzsKfSBlbHNlaWYgKFxQSFBfVkVSU0lPTl9JRCA+PSA3MDIwMCkgewogICAgLy8gUEhQVW5pdCA4IHJlcXVpcmVzIFBIUCA3LjIrCiAgICAkUEhQVU5JVF9WRVJTSU9OID0gJGdldEVudlZhcignU1lNRk9OWV9QSFBVTklUX1ZFUlNJT04nLCAnOC4zJykgPzogJzguMyc7Cn0gZWxzZWlmIChcUEhQX1ZFUlNJT05fSUQgPj0gNzAxMDApIHsKICAgIC8vIFBIUFVuaXQgNyByZXF1aXJlcyBQSFAgNy4xKwogICAgJFBIUFVOSVRfVkVSU0lPTiA9ICRnZXRFbnZWYXIoJ1NZTUZPTllfUEhQVU5JVF9WRVJTSU9OJywgJzcuNScpID86ICc3LjUnOwp9IGVsc2VpZiAoXFBIUF9WRVJTSU9OX0lEID49IDcwMDAwKSB7CiAgICAvLyBQSFBVbml0IDYgcmVxdWlyZXMgUEhQIDcuMCsKICAgICRQSFBVTklUX1ZFUlNJT04gPSAkZ2V0RW52VmFyKCdTWU1GT05ZX1BIUFVOSVRfVkVSU0lPTicsICc2LjUnKSA/OiAnNi41JzsKfSBlbHNlaWYgKFxQSFBfVkVSU0lPTl9JRCA+PSA1MDYwMCkgewogICAgLy8gUEhQVW5pdCA0IGRvZXMgbm90IHN1cHBvcnQgUEhQIDcKICAgICRQSFBVTklUX1ZFUlNJT04gPSAkZ2V0RW52VmFyKCdTWU1GT05ZX1BIUFVOSVRfVkVSU0lPTicsICc1LjcnKSA/OiAnNS43JzsKfSBlbHNlIHsKICAgIC8vIFBIUFVuaXQgNS4xIHJlcXVpcmVzIFBIUCA1LjYrCiAgICAkUEhQVU5JVF9WRVJTSU9OID0gJzQuOCc7Cn0KCiRNQVhfUEhQVU5JVF9WRVJTSU9OID0gJGdldEVudlZhcignU1lNRk9OWV9NQVhfUEhQVU5JVF9WRVJTSU9OJywgZmFsc2UpOwoKaWYgKCRNQVhfUEhQVU5JVF9WRVJTSU9OICYmIHZlcnNpb25fY29tcGFyZSgkTUFYX1BIUFVOSVRfVkVSU0lPTiwgJFBIUFVOSVRfVkVSU0lPTiwgJzwnKSkgewogICAgJFBIUFVOSVRfVkVSU0lPTiA9ICRNQVhfUEhQVU5JVF9WRVJTSU9OOwp9CgokUEhQVU5JVF9SRU1PVkVfUkVUVVJOX1RZUEVISU5UID0gZmlsdGVyX3ZhcigkZ2V0RW52VmFyKCdTWU1GT05ZX1BIUFVOSVRfUkVNT1ZFX1JFVFVSTl9UWVBFSElOVCcsICcwJyksIFxGSUxURVJfVkFMSURBVEVfQk9PTEVBTik7CgokQ09NUE9TRVJfSlNPTiA9IGdldGVudignQ09NUE9TRVInKSA/OiAnY29tcG9zZXIuanNvbic7Cgokcm9vdCA9IF9fRElSX187CndoaWxlICghZmlsZV9leGlzdHMoJHJvb3QuJy8nLiRDT01QT1NFUl9KU09OKSB8fCBmaWxlX2V4aXN0cygkcm9vdC4nL0RlcHJlY2F0aW9uRXJyb3JIYW5kbGVyLnBocCcpKSB7CiAgICBpZiAoJHJvb3QgPT09IGRpcm5hbWUoJHJvb3QpKSB7CiAgICAgICAgYnJlYWs7CiAgICB9CiAgICAkcm9vdCA9IGRpcm5hbWUoJHJvb3QpOwp9Cgokb2xkUHdkID0gZ2V0Y3dkKCk7CiRQSFBVTklUX0RJUiA9ICRnZXRFbnZWYXIoJ1NZTUZPTllfUEhQVU5JVF9ESVInLCAkcm9vdC4nL3ZlbmRvci9iaW4vLnBocHVuaXQnKTsKJFBIUCA9IGRlZmluZWQoJ1BIUF9CSU5BUlknKSA/IFxQSFBfQklOQVJZIDogJ3BocCc7CiRQSFAgPSBlc2NhcGVzaGVsbGFyZygkUEhQKTsKaWYgKCdwaHBkYmcnID09PSBcUEhQX1NBUEkpIHsKICAgICRQSFAgLj0gJyAtcXJyJzsKfQoKJGRlZmF1bHRFbnZzID0gWwogICAgJ0NPTVBPU0VSJyA9PiAnY29tcG9zZXIuanNvbicsCiAgICAnQ09NUE9TRVJfVkVORE9SX0RJUicgPT4gJ3ZlbmRvcicsCiAgICAnQ09NUE9TRVJfQklOX0RJUicgPT4gJ2JpbicsCiAgICAnU1lNRk9OWV9TSU1QTEVfUEhQVU5JVF9CSU5fRElSJyA9PiBfX0RJUl9fLApdOwoKZm9yZWFjaCAoJGRlZmF1bHRFbnZzIGFzICRlbnZOYW1lID0+ICRlbnZWYWx1ZSkgewogICAgaWYgKCRlbnZWYWx1ZSAhPT0gZ2V0ZW52KCRlbnZOYW1lKSkgewogICAgICAgIHB1dGVudigiJGVudk5hbWU9JGVudlZhbHVlIik7CiAgICAgICAgJF9TRVJWRVJbJGVudk5hbWVdID0gJF9FTlZbJGVudk5hbWVdID0gJGVudlZhbHVlOwogICAgfQp9CgppZiAoJ2Rpc2FibGVkJyA9PT0gJGdldEVudlZhcignU1lNRk9OWV9ERVBSRUNBVElPTlNfSEVMUEVSJykpIHsKICAgIHB1dGVudignU1lNRk9OWV9ERVBSRUNBVElPTlNfSEVMUEVSPWRpc2FibGVkJyk7Cn0KCiRDT01QT1NFUiA9IGZpbGVfZXhpc3RzKCRDT01QT1NFUiA9ICRvbGRQd2QuJy9jb21wb3Nlci5waGFyJykKICAgIHx8ICgkQ09NUE9TRVIgPSBydHJpbSgnXFwnID09PSBcRElSRUNUT1JZX1NFUEFSQVRPUiA/IHByZWdfcmVwbGFjZSgnL1tcclxuXS4qLycsICcnLCBgd2hlcmUuZXhlIGNvbXBvc2VyLnBoYXJgKSA6IGB3aGljaCBjb21wb3Nlci5waGFyIDI+IC9kZXYvbnVsbGApKQogICAgfHwgKCRDT01QT1NFUiA9IHJ0cmltKCdcXCcgPT09IFxESVJFQ1RPUllfU0VQQVJBVE9SID8gcHJlZ19yZXBsYWNlKCcvW1xyXG5dLiovJywgJycsIGB3aGVyZS5leGUgY29tcG9zZXJgKSA6IGB3aGljaCBjb21wb3NlciAyPiAvZGV2L251bGxgKSkKICAgIHx8IGZpbGVfZXhpc3RzKCRDT01QT1NFUiA9IHJ0cmltKCdcXCcgPT09IFxESVJFQ1RPUllfU0VQQVJBVE9SID8gYGdpdCByZXYtcGFyc2UgLS1zaG93LXRvcGxldmVsIDI+IE5VTGAgOiBgZ2l0IHJldi1wYXJzZSAtLXNob3ctdG9wbGV2ZWwgMj4gL2Rldi9udWxsYCkuXERJUkVDVE9SWV9TRVBBUkFUT1IuJ2NvbXBvc2VyLnBoYXInKQogICAgPyAoJyMhL3Vzci9iaW4vZW52IHBocCcgPT09IGZpbGVfZ2V0X2NvbnRlbnRzKCRDT01QT1NFUiwgZmFsc2UsIG51bGwsIDAsIDE4KSA/ICRQSFAgOiAnJykuJyAnLmVzY2FwZXNoZWxsYXJnKCRDT01QT1NFUikgLy8gZGV0ZWN0IHNoZWxsIHdyYXBwZXJzIGJ5IGxvb2tpbmcgYXQgdGhlIHNoZWJhbmcKICAgIDogJ2NvbXBvc2VyJzsKCiRwcmV2Q2FjaGVEaXIgPSBnZXRlbnYoJ0NPTVBPU0VSX0NBQ0hFX0RJUicpOwppZiAoJHByZXZDYWNoZURpcikgewogICAgaWYgKGZhbHNlID09PSAkYWJzb2x1dGVDYWNoZURpciA9IHJlYWxwYXRoKCRwcmV2Q2FjaGVEaXIpKSB7CiAgICAgICAgQG1rZGlyKCRwcmV2Q2FjaGVEaXIsIDA3NzcsIHRydWUpOwogICAgICAgICRhYnNvbHV0ZUNhY2hlRGlyID0gcmVhbHBhdGgoJHByZXZDYWNoZURpcik7CiAgICB9CiAgICBpZiAoJGFic29sdXRlQ2FjaGVEaXIpIHsKICAgICAgICBwdXRlbnYoIkNPTVBPU0VSX0NBQ0hFX0RJUj0kYWJzb2x1dGVDYWNoZURpciIpOwogICAgfSBlbHNlIHsKICAgICAgICAkcHJldkNhY2hlRGlyID0gZmFsc2U7CiAgICB9Cn0KJFNZTUZPTllfUEhQVU5JVF9SRU1PVkUgPSAkZ2V0RW52VmFyKCdTWU1GT05ZX1BIUFVOSVRfUkVNT1ZFJywgJ3BocHNwZWMvcHJvcGhlY3knLigkUEhQVU5JVF9WRVJTSU9OIDwgNi4wID8gJyBzeW1mb255L3lhbWwnIDogJycpKTsKJGNvbmZpZ3VyYXRpb25IYXNoID0gbWQ1KGltcGxvZGUoXFBIUF9FT0wsIFttZDVfZmlsZShfX0ZJTEVfXyksICRTWU1GT05ZX1BIUFVOSVRfUkVNT1ZFLCAoaW50KSAkUEhQVU5JVF9SRU1PVkVfUkVUVVJOX1RZUEVISU5UXSkpOwokUEhQVU5JVF9WRVJTSU9OX0RJUiA9IHNwcmludGYoJ3BocHVuaXQtJXMtJWQnLCAkUEhQVU5JVF9WRVJTSU9OLCAkUEhQVU5JVF9SRU1PVkVfUkVUVVJOX1RZUEVISU5UKTsKaWYgKCFmaWxlX2V4aXN0cygiJFBIUFVOSVRfRElSLyRQSFBVTklUX1ZFUlNJT05fRElSL3BocHVuaXQiKSB8fCAkY29uZmlndXJhdGlvbkhhc2ggIT09IEBmaWxlX2dldF9jb250ZW50cygiJFBIUFVOSVRfRElSLy4kUEhQVU5JVF9WRVJTSU9OX0RJUi5tZDUiKSkgewogICAgLy8gQnVpbGQgYSBzdGFuZGFsb25lIHBocHVuaXQgd2l0aG91dCBzeW1mb255L3lhbWwgbm9yIHByb3BoZWN5IGJ5IGRlZmF1bHQKCiAgICBAbWtkaXIoJFBIUFVOSVRfRElSLCAwNzc3LCB0cnVlKTsKICAgIGNoZGlyKCRQSFBVTklUX0RJUik7CiAgICBpZiAoZmlsZV9leGlzdHMoIiRQSFBVTklUX1ZFUlNJT05fRElSIikpIHsKICAgICAgICBwYXNzdGhydShzcHJpbnRmKCdcXCcgPT09IFxESVJFQ1RPUllfU0VQQVJBVE9SID8gJ3JtZGlyIC9TIC9RICVzID4gTlVMJyA6ICdybSAtcmYgJXMnLCAiJFBIUFVOSVRfVkVSU0lPTl9ESVIub2xkIikpOwogICAgICAgIHJlbmFtZSgiJFBIUFVOSVRfVkVSU0lPTl9ESVIiLCAiJFBIUFVOSVRfVkVSU0lPTl9ESVIub2xkIik7CiAgICAgICAgcGFzc3RocnUoc3ByaW50ZignXFwnID09PSBcRElSRUNUT1JZX1NFUEFSQVRPUiA/ICdybWRpciAvUyAvUSAlcycgOiAncm0gLXJmICVzJywgIiRQSFBVTklUX1ZFUlNJT05fRElSLm9sZCIpKTsKICAgIH0KCiAgICAkaW5mbyA9IFtdOwogICAgZm9yZWFjaCAoZXhwbG9kZSgiXG4iLCBgJENPTVBPU0VSIGluZm8gLS1uby1hbnNpIC1hIC1uIHBocHVuaXQvcGhwdW5pdCAiJFBIUFVOSVRfVkVSU0lPTi4qImApIGFzICRsaW5lKSB7CiAgICAgICAgJGxpbmUgPSBydHJpbSgkbGluZSk7CgogICAgICAgIGlmICghJGluZm8gJiYgcHJlZ19tYXRjaCgnL152ZXJzaW9ucyArOiAvJywgJGxpbmUpKSB7CiAgICAgICAgICAgICRpbmZvWyd2ZXJzaW9ucyddID0gZXhwbG9kZSgnLCAnLCBsdHJpbShzdWJzdHIoJGxpbmUsIDkpLCAnOiAnKSk7CiAgICAgICAgfSBlbHNlaWYgKGlzc2V0KCRpbmZvWydyZXF1aXJlcyddKSkgewogICAgICAgICAgICBpZiAoJycgPT09ICRsaW5lKSB7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJGxpbmUgPSBleHBsb2RlKCcgJywgJGxpbmUsIDIpOwogICAgICAgICAgICAkaW5mb1sncmVxdWlyZXMnXVskbGluZVswXV0gPSAkbGluZVsxXTsKICAgICAgICB9IGVsc2VpZiAoJGluZm8gJiYgJ3JlcXVpcmVzJyA9PT0gJGxpbmUpIHsKICAgICAgICAgICAgJGluZm9bJ3JlcXVpcmVzJ10gPSBbXTsKICAgICAgICB9CiAgICB9CgogICAgaWYgKGluX2FycmF5KCctLWNvbG9ycz1uZXZlcicsICRhcmd2LCB0cnVlKSB8fCAoaXNzZXQoJGFyZ3ZbJGkgPSBhcnJheV9zZWFyY2goJ25ldmVyJywgJGFyZ3YsIHRydWUpIC0gMV0pICYmICctLWNvbG9ycycgPT09ICRhcmd2WyRpXSkpIHsKICAgICAgICAkQ09NUE9TRVIgLj0gJyAtLW5vLWFuc2knOwogICAgfSBlbHNlIHsKICAgICAgICAkQ09NUE9TRVIgLj0gJyAtLWFuc2knOwogICAgfQoKICAgICRpbmZvICs9IFsKICAgICAgICAndmVyc2lvbnMnID0+IFtdLAogICAgICAgICdyZXF1aXJlcycgPT4gWydwaHAnID0+ICcqJ10sCiAgICBdOwoKICAgICRzdGFibGVWZXJzaW9ucyA9IGFycmF5X2ZpbHRlcigkaW5mb1sndmVyc2lvbnMnXSwgZnVuY3Rpb24gKCR2KSB7CiAgICAgICAgcmV0dXJuICFwcmVnX21hdGNoKCcvLWRldiR8XmRldi0vJywgJHYpOwogICAgfSk7CgogICAgaWYgKCEkc3RhYmxlVmVyc2lvbnMpIHsKICAgICAgICAkcGFzc3RocnVPckZhaWwoIiRDT01QT1NFUiBjcmVhdGUtcHJvamVjdCAtLWlnbm9yZS1wbGF0Zm9ybS1yZXFzIC0tbm8taW5zdGFsbCAtLXByZWZlci1kaXN0IC0tbm8tc2NyaXB0cyAtLW5vLXBsdWdpbnMgLS1uby1wcm9ncmVzcyAtcyBkZXYgcGhwdW5pdC9waHB1bml0ICRQSFBVTklUX1ZFUlNJT05fRElSIFwiJFBIUFVOSVRfVkVSU0lPTi4qXCIiKTsKICAgIH0gZWxzZSB7CiAgICAgICAgJHBhc3N0aHJ1T3JGYWlsKCIkQ09NUE9TRVIgY3JlYXRlLXByb2plY3QgLS1pZ25vcmUtcGxhdGZvcm0tcmVxcyAtLW5vLWluc3RhbGwgLS1wcmVmZXItZGlzdCAtLW5vLXNjcmlwdHMgLS1uby1wbHVnaW5zIC0tbm8tcHJvZ3Jlc3MgcGhwdW5pdC9waHB1bml0ICRQSFBVTklUX1ZFUlNJT05fRElSIFwiJFBIUFVOSVRfVkVSU0lPTi4qXCIiKTsKICAgIH0KCiAgICBAY29weSgiJFBIUFVOSVRfVkVSU0lPTl9ESVIvcGhwdW5pdC54c2QiLCAncGhwdW5pdC54c2QnKTsKICAgIGNoZGlyKCIkUEhQVU5JVF9WRVJTSU9OX0RJUiIpOwogICAgaWYgKCRTWU1GT05ZX1BIUFVOSVRfUkVNT1ZFKSB7CiAgICAgICAgJHBhc3N0aHJ1T3JGYWlsKCIkQ09NUE9TRVIgcmVtb3ZlIC0tbm8tdXBkYXRlICIuJFNZTUZPTllfUEhQVU5JVF9SRU1PVkUpOwogICAgfQogICAgaWYgKDUuMSA8PSAkUEhQVU5JVF9WRVJTSU9OICYmICRQSFBVTklUX1ZFUlNJT04gPCA1LjQpIHsKICAgICAgICAkcGFzc3RocnVPckZhaWwoIiRDT01QT1NFUiByZXF1aXJlIC0tbm8tdXBkYXRlIHBocHVuaXQvcGhwdW5pdC1tb2NrLW9iamVjdHMgXCJ+My4xLjBcIiIpOwogICAgfQoKICAgIGlmIChwcmVnX21hdGNoKCd7XF4oKFxkKytcLilcZCsrKVtcZFwuXSokfScsICRpbmZvWydyZXF1aXJlcyddWydwaHAnXSwgJHBocFZlcnNpb24pICYmIHZlcnNpb25fY29tcGFyZSgkcGhwVmVyc2lvblsyXS4nOTknLCBcUEhQX1ZFUlNJT04sICc8JykpIHsKICAgICAgICAkcGFzc3RocnVPckZhaWwoIiRDT01QT1NFUiBjb25maWcgcGxhdGZvcm0ucGhwIFwiJHBocFZlcnNpb25bMV0uOTlcIiIpOwogICAgfSBlbHNlIHsKICAgICAgICAkcGFzc3RocnVPckZhaWwoIiRDT01QT1NFUiBjb25maWcgLS11bnNldCBwbGF0Zm9ybS5waHAiKTsKICAgIH0KICAgIGlmIChmaWxlX2V4aXN0cygkcGF0aCA9ICRyb290LicvdmVuZG9yL3N5bWZvbnkvcGhwdW5pdC1icmlkZ2UnKSkgewogICAgICAgICRwYXNzdGhydU9yRmFpbCgiJENPTVBPU0VSIHJlcXVpcmUgLS1uby11cGRhdGUgc3ltZm9ueS9waHB1bml0LWJyaWRnZSBcIipAZGV2XCIiKTsKICAgICAgICAkcGFzc3RocnVPckZhaWwoIiRDT01QT1NFUiBjb25maWcgcmVwb3NpdG9yaWVzLnBocHVuaXQtYnJpZGdlIHBhdGggIi5lc2NhcGVzaGVsbGFyZyhzdHJfcmVwbGFjZSgnLycsIFxESVJFQ1RPUllfU0VQQVJBVE9SLCAkcGF0aCkpKTsKICAgICAgICBpZiAoJ1xcJyA9PT0gXERJUkVDVE9SWV9TRVBBUkFUT1IpIHsKICAgICAgICAgICAgZmlsZV9wdXRfY29udGVudHMoJ2NvbXBvc2VyLmpzb24nLCBwcmVnX3JlcGxhY2UoJy9eKCB7OH0pInBocHVuaXQtYnJpZGdlIjogXHskL20nLCAiJDBcbiQxICAgICIuJyJvcHRpb25zIjogeyJzeW1saW5rIjogZmFsc2V9LCcsIGZpbGVfZ2V0X2NvbnRlbnRzKCdjb21wb3Nlci5qc29uJykpKTsKICAgICAgICB9CiAgICB9IGVsc2UgewogICAgICAgICRwYXNzdGhydU9yRmFpbCgiJENPTVBPU0VSIHJlcXVpcmUgLS1uby11cGRhdGUgc3ltZm9ueS9waHB1bml0LWJyaWRnZSBcIipcIiIpOwogICAgfQogICAgJHByZXZSb290ID0gZ2V0ZW52KCdDT01QT1NFUl9ST09UX1ZFUlNJT04nKTsKICAgIHB1dGVudigiQ09NUE9TRVJfUk9PVF9WRVJTSU9OPSRQSFBVTklUX1ZFUlNJT04uOTkiKTsKICAgICRxID0gJ1xcJyA9PT0gXERJUkVDVE9SWV9TRVBBUkFUT1IgJiYgXFBIUF9WRVJTSU9OX0lEIDwgODAwMDAgPyAnIicgOiAnJzsKICAgIC8vIC0tbm8tc3VnZ2VzdCBpcyBub3QgaW4gdGhlIGxpc3QgdG8ga2VlcCBjb21wYXQgd2l0aCBjb21wb3NlciAxLjAsIHdoaWNoIGlzIHNoaXBwZWQgd2l0aCBVYnVudHUgMTYuMDRMVFMKICAgICRleGl0ID0gcHJvY19jbG9zZShwcm9jX29wZW4oIiRxJENPTVBPU0VSIGluc3RhbGwgLS1uby1kZXYgLS1wcmVmZXItZGlzdCAtLW5vLXByb2dyZXNzICRxIiwgW10sICRwLCBnZXRjd2QoKSkpOwogICAgcHV0ZW52KCdDT01QT1NFUl9ST09UX1ZFUlNJT04nLihmYWxzZSAhPT0gJHByZXZSb290ID8gJz0nLiRwcmV2Um9vdCA6ICcnKSk7CiAgICBpZiAoJHByZXZDYWNoZURpcikgewogICAgICAgIHB1dGVudigiQ09NUE9TRVJfQ0FDSEVfRElSPSRwcmV2Q2FjaGVEaXIiKTsKICAgIH0KICAgIGlmICgkZXhpdCkgewogICAgICAgIGV4aXQoJGV4aXQpOwogICAgfQoKICAgIC8vIE11dGF0ZSBUZXN0Q2FzZSBjb2RlCiAgICAkYWx0ZXJlZENvZGUgPSBmaWxlX2dldF9jb250ZW50cygkYWx0ZXJlZEZpbGUgPSAnLi9zcmMvRnJhbWV3b3JrL1Rlc3RDYXNlLnBocCcpOwogICAgaWYgKCRQSFBVTklUX1JFTU9WRV9SRVRVUk5fVFlQRUhJTlQpIHsKICAgICAgICAkYWx0ZXJlZENvZGUgPSBwcmVnX3JlcGxhY2UoJy9eICAgICgoPzpwcm90ZWN0ZWR8cHVibGljKSg/OiBzdGF0aWMpPyBmdW5jdGlvbiBcdytcKFwpKTogdm9pZC9tJywgJyAgICAkMScsICRhbHRlcmVkQ29kZSk7CiAgICB9CiAgICAkYWx0ZXJlZENvZGUgPSBwcmVnX3JlcGxhY2UoJy9hYnN0cmFjdCBjbGFzcyAoPzpUZXN0Q2FzZXxQSFBVbml0X0ZyYW1ld29ya19UZXN0Q2FzZSlbXlx7XStcey8nLCAnJDAgJy5cUEhQX0VPTC4iICAgIHVzZSBcU3ltZm9ueVxCcmlkZ2VcUGhwVW5pdFxMZWdhY3lcUG9seWZpbGxUZXN0Q2FzZVRyYWl0OyIsICRhbHRlcmVkQ29kZSwgMSk7CiAgICBmaWxlX3B1dF9jb250ZW50cygkYWx0ZXJlZEZpbGUsICRhbHRlcmVkQ29kZSk7CgogICAgLy8gTXV0YXRlIEFzc2VydCBjb2RlCiAgICAkYWx0ZXJlZENvZGUgPSBmaWxlX2dldF9jb250ZW50cygkYWx0ZXJlZEZpbGUgPSAnLi9zcmMvRnJhbWV3b3JrL0Fzc2VydC5waHAnKTsKICAgICRhbHRlcmVkQ29kZSA9IHByZWdfcmVwbGFjZSgnL2Fic3RyYWN0IGNsYXNzICg/OkFzc2VydHxQSFBVbml0X0ZyYW1ld29ya19Bc3NlcnQpW15ce10rXHsvJywgJyQwICcuXFBIUF9FT0wuIiAgICB1c2UgXFN5bWZvbnlcQnJpZGdlXFBocFVuaXRcTGVnYWN5XFBvbHlmaWxsQXNzZXJ0VHJhaXQ7IiwgJGFsdGVyZWRDb2RlLCAxKTsKICAgIGZpbGVfcHV0X2NvbnRlbnRzKCRhbHRlcmVkRmlsZSwgJGFsdGVyZWRDb2RlKTsKCiAgICBmaWxlX3B1dF9jb250ZW50cygncGhwdW5pdCcsIDw8PCdFT1BIUCcKPD9waHAKCmRlZmluZSgnUEhQVU5JVF9DT01QT1NFUl9JTlNUQUxMJywgX19ESVJfXy4nL3ZlbmRvci9hdXRvbG9hZC5waHAnKTsKcmVxdWlyZSBQSFBVTklUX0NPTVBPU0VSX0lOU1RBTEw7CgppZiAoIWNsYXNzX2V4aXN0cyhcU3ltZm9ueUV4Y2x1ZGVMaXN0UGhwdW5pdDo6Y2xhc3MsIGZhbHNlKSkgewogICAgY2xhc3MgU3ltZm9ueUV4Y2x1ZGVMaXN0UGhwdW5pdCB7fQp9CmlmIChtZXRob2RfZXhpc3RzKFxQSFBVbml0XFV0aWxcRXhjbHVkZUxpc3Q6OmNsYXNzLCAnYWRkRGlyZWN0b3J5JykpIHsKICAgIChuZXcgUEhQVW5pdFxVdGlsXEV4Y2x1ZGVsaXN0KCkpLT5nZXRFeGNsdWRlZERpcmVjdG9yaWVzKCk7CiAgICBQSFBVbml0XFV0aWxcRXhjbHVkZUxpc3Q6OmFkZERpcmVjdG9yeShcZGlybmFtZSgobmV3IFxSZWZsZWN0aW9uQ2xhc3MoXFN5bWZvbnlFeGNsdWRlTGlzdFBocHVuaXQ6OmNsYXNzKSktPmdldEZpbGVOYW1lKCkpKTsKICAgIGNsYXNzX2V4aXN0cyhcU3ltZm9ueUV4Y2x1ZGVMaXN0U2ltcGxlUGhwdW5pdDo6Y2xhc3MsIGZhbHNlKSAmJiBQSFBVbml0XFV0aWxcRXhjbHVkZUxpc3Q6OmFkZERpcmVjdG9yeShcZGlybmFtZSgobmV3IFxSZWZsZWN0aW9uQ2xhc3MoXFN5bWZvbnlFeGNsdWRlTGlzdFNpbXBsZVBocHVuaXQ6OmNsYXNzKSktPmdldEZpbGVOYW1lKCkpKTsKfSBlbHNlaWYgKG1ldGhvZF9leGlzdHMoXFBIUFVuaXRcVXRpbFxCbGFja2xpc3Q6OmNsYXNzLCAnYWRkRGlyZWN0b3J5JykpIHsKICAgIChuZXcgUEhQVW5pdFxVdGlsXEJsYWNrTGlzdCgpKS0+Z2V0QmxhY2tsaXN0ZWREaXJlY3RvcmllcygpOwogICAgUEhQVW5pdFxVdGlsXEJsYWNrbGlzdDo6YWRkRGlyZWN0b3J5KFxkaXJuYW1lKChuZXcgXFJlZmxlY3Rpb25DbGFzcyhcU3ltZm9ueUV4Y2x1ZGVMaXN0UGhwdW5pdDo6Y2xhc3MpKS0+Z2V0RmlsZU5hbWUoKSkpOwogICAgY2xhc3NfZXhpc3RzKFxTeW1mb255RXhjbHVkZUxpc3RTaW1wbGVQaHB1bml0OjpjbGFzcywgZmFsc2UpICYmIFBIUFVuaXRcVXRpbFxCbGFja2xpc3Q6OmFkZERpcmVjdG9yeShcZGlybmFtZSgobmV3IFxSZWZsZWN0aW9uQ2xhc3MoXFN5bWZvbnlFeGNsdWRlTGlzdFNpbXBsZVBocHVuaXQ6OmNsYXNzKSktPmdldEZpbGVOYW1lKCkpKTsKfSBlbHNlIHsKICAgIFBIUFVuaXRcVXRpbFxCbGFja2xpc3Q6OiRibGFja2xpc3RlZENsYXNzTmFtZXNbJ1N5bWZvbnlFeGNsdWRlTGlzdFBocHVuaXQnXSA9IDE7CiAgICBQSFBVbml0XFV0aWxcQmxhY2tsaXN0OjokYmxhY2tsaXN0ZWRDbGFzc05hbWVzWydTeW1mb255RXhjbHVkZUxpc3RTaW1wbGVQaHB1bml0J10gPSAxOwp9CgpTeW1mb255XEJyaWRnZVxQaHBVbml0XFRleHRVSVxDb21tYW5kOjptYWluKCk7CgpFT1BIUAogICAgKTsKICAgIGNoZGlyKCcuLicpOwogICAgZmlsZV9wdXRfY29udGVudHMoIi4kUEhQVU5JVF9WRVJTSU9OX0RJUi5tZDUiLCAkY29uZmlndXJhdGlvbkhhc2gpOwogICAgY2hkaXIoJG9sZFB3ZCk7Cn0KCi8vIENyZWF0ZSBhIHN5bWxpbmsgd2l0aCBhIHByZWRpY3RhYmxlIHBhdGggcG9pbnRpbmcgdG8gdGhlIGN1cnJlbnRseSB1c2VkIHZlcnNpb24uCi8vIFRoaXMgaXMgdXNlZnVsIGZvciBzdGF0aWMgYW5hbHl0aWNzIHRvb2xzIHN1Y2ggYXMgUEhQU3RhbiBoYXZpbmcgdG8gbG9hZCBQSFBVbml0J3MgY2xhc3NlcwovLyBhbmQgZm9yIG90aGVyIHRlc3RpbmcgbGlicmFyaWVzIHN1Y2ggYXMgQmVoYXQgdXNpbmcgUEhQVW5pdCdzIGFzc2VydGlvbnMuCmNoZGlyKCRQSFBVTklUX0RJUik7CmlmIChmaWxlX2V4aXN0cygncGhwdW5pdCcpKSB7CiAgICBAdW5saW5rKCdwaHB1bml0Jyk7Cn0KQHN5bWxpbmsoJFBIUFVOSVRfVkVSU0lPTl9ESVIsICdwaHB1bml0Jyk7CmNoZGlyKCRvbGRQd2QpOwoKaWYgKCRQSFBVTklUX1ZFUlNJT04gPCA4LjApIHsKICAgICRhcmd2ID0gYXJyYXlfZmlsdGVyKCRhcmd2LCBmdW5jdGlvbiAoJHYpIHVzZSAoJiRhcmdjKSB7CiAgICAgICAgaWYgKCctLWRvLW5vdC1jYWNoZS1yZXN1bHQnICE9PSAkdikgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgLS0kYXJnYzsKCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSk7Cn0gZWxzZWlmIChmaWx0ZXJfdmFyKGdldGVudignU1lNRk9OWV9QSFBVTklUX0RJU0FCTEVfUkVTVUxUX0NBQ0hFJyksIFxGSUxURVJfVkFMSURBVEVfQk9PTEVBTikpIHsKICAgICRhcmd2W10gPSAnLS1kby1ub3QtY2FjaGUtcmVzdWx0JzsKICAgICsrJGFyZ2M7Cn0KCiRjb21wb25lbnRzID0gW107CiRjbWQgPSBhcnJheV9tYXAoJ2VzY2FwZXNoZWxsYXJnJywgJGFyZ3YpOwokZXhpdCA9IDA7CgppZiAoaXNzZXQoJGFyZ3ZbMV0pICYmICdzeW1mb255JyA9PT0gJGFyZ3ZbMV0gJiYgIWZpbGVfZXhpc3RzKCdzeW1mb255JykgJiYgZmlsZV9leGlzdHMoJ3NyYy9TeW1mb255JykpIHsKICAgICRhcmd2WzFdID0gJ3NyYy9TeW1mb255JzsKfQppZiAoaXNzZXQoJGFyZ3ZbMV0pICYmIGlzX2RpcigkYXJndlsxXSkgJiYgIWZpbGVfZXhpc3RzKCRhcmd2WzFdLicvcGhwdW5pdC54bWwuZGlzdCcpKSB7CiAgICAvLyBGaW5kIFN5bWZvbnkgY29tcG9uZW50cyBpbiBwbGFpbiBwaHAgZm9yIFdpbmRvd3MgcG9ydGFiaWxpdHkKCiAgICAkZmluZGVyID0gbmV3IFJlY3Vyc2l2ZURpcmVjdG9yeUl0ZXJhdG9yKCRhcmd2WzFdLCBGaWxlc3lzdGVtSXRlcmF0b3I6OktFWV9BU19GSUxFTkFNRSB8IEZpbGVzeXN0ZW1JdGVyYXRvcjo6VU5JWF9QQVRIUyk7CiAgICAkZmluZGVyID0gbmV3IFJlY3Vyc2l2ZUl0ZXJhdG9ySXRlcmF0b3IoJGZpbmRlcik7CiAgICAkZmluZGVyLT5zZXRNYXhEZXB0aChnZXRlbnYoJ1NZTUZPTllfUEhQVU5JVF9NQVhfREVQVEgnKSA/OiAzKTsKCiAgICBmb3JlYWNoICgkZmluZGVyIGFzICRmaWxlID0+ICRmaWxlSW5mbykgewogICAgICAgIGlmICgncGhwdW5pdC54bWwuZGlzdCcgPT09ICRmaWxlKSB7CiAgICAgICAgICAgICRjb21wb25lbnRzW10gPSBkaXJuYW1lKCRmaWxlSW5mby0+Z2V0UGF0aG5hbWUoKSk7CiAgICAgICAgfQogICAgfQogICAgaWYgKCRjb21wb25lbnRzKSB7CiAgICAgICAgYXJyYXlfc2hpZnQoJGNtZCk7CiAgICB9Cn0KCiRjbWRbMF0gPSBzcHJpbnRmKCclcyAlcyAtLWNvbG9ycz1hbHdheXMnLCAkUEhQLCBlc2NhcGVzaGVsbGFyZygiJFBIUFVOSVRfRElSLyRQSFBVTklUX1ZFUlNJT05fRElSL3BocHVuaXQiKSk7CiRjbWQgPSBzdHJfcmVwbGFjZSgnJScsICclJScsIGltcGxvZGUoJyAnLCAkY21kKSkuJyAlMSRzJzsKCmlmICgnXFwnID09PSBcRElSRUNUT1JZX1NFUEFSQVRPUikgewogICAgJGNtZCA9ICdjbWQgL3Y6b24gL2QgL2MgIignLiRjbWQuJyklMiRzIic7Cn0gZWxzZSB7CiAgICAkY21kIC49ICclMiRzJzsKfQoKaWYgKCRjb21wb25lbnRzKSB7CiAgICAkc2tpcHBlZFRlc3RzID0gaXNzZXQoJF9TRVJWRVJbJ1NZTUZPTllfUEhQVU5JVF9TS0lQUEVEX1RFU1RTJ10pID8gJF9TRVJWRVJbJ1NZTUZPTllfUEhQVU5JVF9TS0lQUEVEX1RFU1RTJ10gOiBmYWxzZTsKICAgICRydW5uaW5nUHJvY3MgPSBbXTsKCiAgICBmb3JlYWNoICgkY29tcG9uZW50cyBhcyAkY29tcG9uZW50KSB7CiAgICAgICAgLy8gUnVuIHBocHVuaXQgdGVzdHMgaW4gcGFyYWxsZWwKCiAgICAgICAgaWYgKCRza2lwcGVkVGVzdHMpIHsKICAgICAgICAgICAgcHV0ZW52KCJTWU1GT05ZX1BIUFVOSVRfU0tJUFBFRF9URVNUUz0kY29tcG9uZW50LyRza2lwcGVkVGVzdHMiKTsKICAgICAgICB9CgogICAgICAgICRjID0gZXNjYXBlc2hlbGxhcmcoJGNvbXBvbmVudCk7CgogICAgICAgIGlmICgkcHJvYyA9IHByb2Nfb3BlbihzcHJpbnRmKCRjbWQsICRjLCAiID4gJGMvcGhwdW5pdC5zdGRvdXQgMj4gJGMvcGhwdW5pdC5zdGRlcnIiKSwgW10sICRwaXBlcykpIHsKICAgICAgICAgICAgJHJ1bm5pbmdQcm9jc1skY29tcG9uZW50XSA9ICRwcm9jOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICRleGl0ID0gMTsKICAgICAgICAgICAgZWNobyAiXDAzM1s0MW1LT1wwMzNbMG0gJGNvbXBvbmVudFxuXG4iOwogICAgICAgIH0KICAgIH0KCiAgICB3aGlsZSAoJHJ1bm5pbmdQcm9jcykgewogICAgICAgIHVzbGVlcCgzMDAwMDApOwogICAgICAgICR0ZXJtaW5hdGVkUHJvY3MgPSBbXTsKICAgICAgICBmb3JlYWNoICgkcnVubmluZ1Byb2NzIGFzICRjb21wb25lbnQgPT4gJHByb2MpIHsKICAgICAgICAgICAgJHByb2NTdGF0dXMgPSBwcm9jX2dldF9zdGF0dXMoJHByb2MpOwogICAgICAgICAgICBpZiAoISRwcm9jU3RhdHVzWydydW5uaW5nJ10pIHsKICAgICAgICAgICAgICAgICR0ZXJtaW5hdGVkUHJvY3NbJGNvbXBvbmVudF0gPSAkcHJvY1N0YXR1c1snZXhpdGNvZGUnXTsKICAgICAgICAgICAgICAgIHVuc2V0KCRydW5uaW5nUHJvY3NbJGNvbXBvbmVudF0pOwogICAgICAgICAgICAgICAgcHJvY19jbG9zZSgkcHJvYyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZvcmVhY2ggKCR0ZXJtaW5hdGVkUHJvY3MgYXMgJGNvbXBvbmVudCA9PiAkcHJvY1N0YXR1cykgewogICAgICAgICAgICBmb3JlYWNoIChbJ291dCcsICdlcnInXSBhcyAkZmlsZSkgewogICAgICAgICAgICAgICAgJGZpbGUgPSAiJGNvbXBvbmVudC9waHB1bml0LnN0ZCRmaWxlIjsKICAgICAgICAgICAgICAgIHJlYWRmaWxlKCRmaWxlKTsKICAgICAgICAgICAgICAgIHVubGluaygkZmlsZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIEZhaWwgb24gYW55IGluZGl2aWR1YWwgY29tcG9uZW50IGZhaWx1cmVzIGJ1dCBpZ25vcmUgc29tZSBlcnJvciBjb2RlcyBvbiBXaW5kb3dzIHdoZW4gQVBDdSBpcyBlbmFibGVkOgogICAgICAgICAgICAvLyBTVEFUVVNfU1RBQ0tfQlVGRkVSX09WRVJSVU4gKC0xMDczNzQwNzkxLzB4QzAwMDA0MDkpCiAgICAgICAgICAgIC8vIFNUQVRVU19BQ0NFU1NfVklPTEFUSU9OICgtMTA3Mzc0MTgxOS8weEMwMDAwMDA1KQogICAgICAgICAgICAvLyBTVEFUVVNfSEVBUF9DT1JSVVBUSU9OICgtMTA3Mzc0MDk0MC8weEMwMDAwMzc0KQogICAgICAgICAgICBpZiAoJHByb2NTdGF0dXMgJiYgKCdcXCcgIT09IFxESVJFQ1RPUllfU0VQQVJBVE9SIHx8ICFleHRlbnNpb25fbG9hZGVkKCdhcGN1JykgfHwgIWZpbHRlcl92YXIoaW5pX2dldCgnYXBjLmVuYWJsZV9jbGknKSwgXEZJTFRFUl9WQUxJREFURV9CT09MRUFOKSB8fCAhaW5fYXJyYXkoJHByb2NTdGF0dXMsIFstMTA3Mzc0MDc5MSwgLTEwNzM3NDE4MTksIC0xMDczNzQwOTQwXSkpKSB7CiAgICAgICAgICAgICAgICAkZXhpdCA9ICRwcm9jU3RhdHVzOwogICAgICAgICAgICAgICAgZWNobyAiXDAzM1s0MW1LT1wwMzNbMG0gJGNvbXBvbmVudFxuXG4iOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZWNobyAiXDAzM1szMm1PS1wwMzNbMG0gJGNvbXBvbmVudFxuXG4iOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9IGVsc2VpZiAoIWlzc2V0KCRhcmd2WzFdKSB8fCAnaW5zdGFsbCcgIT09ICRhcmd2WzFdIHx8IGZpbGVfZXhpc3RzKCdpbnN0YWxsJykpIHsKICAgIGlmICghY2xhc3NfZXhpc3RzKFxTeW1mb255RXhjbHVkZUxpc3RTaW1wbGVQaHB1bml0OjpjbGFzcywgZmFsc2UpKSB7CiAgICAgICAgY2xhc3MgU3ltZm9ueUV4Y2x1ZGVMaXN0U2ltcGxlUGhwdW5pdAogICAgICAgIHsKICAgICAgICB9CiAgICB9CiAgICBhcnJheV9zcGxpY2UoJGFyZ3YsIDEsIDAsIFsnLS1jb2xvcnM9YWx3YXlzJ10pOwogICAgJF9TRVJWRVJbJ2FyZ3YnXSA9ICRhcmd2OwogICAgJF9TRVJWRVJbJ2FyZ2MnXSA9ICsrJGFyZ2M7CiAgICBpbmNsdWRlICIkUEhQVU5JVF9ESVIvJFBIUFVOSVRfVkVSU0lPTl9ESVIvcGhwdW5pdCI7Cn0KCmV4aXQoJGV4aXQpOwoiO3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAbmFtZXNwYWNlcyI7YTowOnt9czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBpbmNsdWRlcyI7YTowOnt9czo0NDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBmdW5jdGlvbnMiO2E6MDp7fXM6NDQ6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAY29uc3RhbnRzIjthOjA6e31zOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGNsYXNzZXMiO2E6MTp7czozMjoiXFN5bWZvbnlFeGNsdWRlTGlzdFNpbXBsZVBocHVuaXQiO086MzU6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfIjoxMTp7czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAGZxc2VuIjtPOjMwOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4iOjI6e3M6Mzc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AZnFzZW4iO3M6MzI6IlxTeW1mb255RXhjbHVkZUxpc3RTaW1wbGVQaHB1bml0IjtzOjM2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAG5hbWUiO3M6MzE6IlN5bWZvbnlFeGNsdWRlTGlzdFNpbXBsZVBocHVuaXQiO31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AZG9jQmxvY2siO047czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAGFic3RyYWN0IjtiOjA7czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAGZpbmFsIjtiOjA7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAHBhcmVudCI7TjtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AaW1wbGVtZW50cyI7YTowOnt9czo0NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAGNvbnN0YW50cyI7YTowOnt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAHByb3BlcnRpZXMiO2E6MDp7fXM6NDQ6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBtZXRob2RzIjthOjA6e31zOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AdXNlZFRyYWl0cyI7YTowOnt9czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAGxvY2F0aW9uIjtPOjMzOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24iOjI6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AbGluZU51bWJlciI7aTo0MjM7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBjb2x1bW5OdW1iZXIiO2k6MDt9fX1zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGludGVyZmFjZXMiO2E6MDp7fXM6NDE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAdHJhaXRzIjthOjA6e319";